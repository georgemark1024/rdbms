<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Manage Categories</title>
    <style>
        body { font-family: sans-serif; margin: 40px; line-height: 1.6; }
        .error { color: #721c24; background-color: #f8d7da; padding: 10px; border: 1px solid #f5c6cb; border-radius: 4px; }
        .success { color: #155724; background-color: #d4edda; padding: 10px; border: 1px solid #c3e6cb; border-radius: 4px; }
        table { width: 50%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    </style>
</head>
<body>
    <h1>Manage Task Categories</h1>
    <nav><a href="/">‚Üê Back to Dashboard</a></nav>

    <section>
        <h3>Create New Category</h3>
        <p><small>Testing Primary Key: Try adding an ID that already exists in the table below.</small></p>
        
        {% with messages = get_flashed_messages() %}
          {% if messages %}
            {% for message in messages %}
              <div class="{{ 'error' if 'Error' in message or 'Duplicate' in message else 'success' }}">
                  {{ message }}
              </div>
            {% endfor %}
          {% endif %}
        {% endwith %}

        <form action="/add_category" method="POST" style="margin-top: 20px;">
            <input type="number" name="id" placeholder="Category ID" required>
            <input type="text" name="name" placeholder="Category Name (e.g. Urgent)" required>
            <button type="submit">Add Category</button>
        </form>
    </section>

    <section>
        <h3>Existing Categories</h3>
        <table>
            <thead>
                <tr style="background-color: #f2f2f2;">
                    <th>ID (Primary Key)</th>
                    <th>Category Name</th>
                </tr>
            </thead>
            <tbody>
                {% for cat in categories %}
                <tr>
                    <td>{{ cat.id }}</td>
                    <td>{{ cat.name }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>
</body>
</html>